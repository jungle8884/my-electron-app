<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AIC8800-SDIO口测试</title>
  <!-- 引入Vue -->
  <script src="./js/vue.js"></script>
  <!-- 引入Element UI CSS -->
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
  <!-- 引入自定义CSS -->
  <link rel="stylesheet" href="./styles.css">
  <!-- 引入Element UI JS -->
  <script src="https://unpkg.com/element-ui/lib/index.js"></script>
</head>
<body>
  <div id="app">
    <!-- 标题栏 -->
    <h1 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">AIC8800-SDIO口测试工具</h1>
    
    <!-- 状态信息 -->
    <el-card class="status-bar">
      <el-alert
        :title="info"
        type="info"
        show-icon
        :closable="false"
      ></el-alert>
    </el-card>
    
    <!-- 配置信息 -->
    <el-card class="config-section">
      <div slot="header" class="clearfix">
        <span>串口配置信息</span>
      </div>
      <div class="config-item">
        <span class="config-label">串口:</span>
        <span class="config-value">{{ config.Serial }}</span>
      </div>
      <div class="config-item">
        <span class="config-label">波特率:</span>
        <span class="config-value">{{ config.BaudRate }}</span>
      </div>
      <div class="config-item">
        <span class="config-label">数据位:</span>
        <span class="config-value">{{ config.DataBits }}</span>
      </div>
      <div class="config-item">
        <span class="config-label">停止位:</span>
        <span class="config-value">{{ config.StopBits }}</span>
      </div>
      <div class="config-item">
        <span class="config-label">校验位:</span>
        <span class="config-value">{{ config.Parity }}</span>
      </div>
      <div class="config-item">
        <span class="config-label">固件文件:</span>
        <span class="config-value">{{ config.Bin }}</span>
      </div>
      <div class="config-item">
        <span class="config-label">测试指令:</span>
        <span class="config-value">{{ config.TestOrders }}</span>
      </div>
    </el-card>
    
    <!-- 功能按钮区域 -->
    <el-card>
      <div slot="header" class="clearfix">
        <span>功能模块</span>
      </div>
      <div class="function-buttons">
        <el-button 
          type="primary" 
          @click="readFile" 
          :loading="readLoading"
          title="读取配置文件"
        >
          读取文件
        </el-button>
        <el-button 
          type="success" 
          @click="downloadFireWare" 
          :loading="downloadLoading"
          title="下载固件到设备"
        >
          下载固件
        </el-button>
        <el-button 
          type="warning" 
          @click="testOrders" 
          :loading="testLoading"
          title="执行测试指令"
        >
          测试指令
        </el-button>
        <el-button 
          type="info" 
          @click="showTestResult" 
          :disabled="!testButtonVisible"
          :class="testResultPass ? 'success-text' : 'error-text'"
          title="查看测试结果"
        >
          {{ testResultPass ? '测试通过' : '测试失败' }}
        </el-button>
        <el-button 
          type="danger" 
          @click="clearLogs"
          title="清除所有日志"
        >
          清除日志
        </el-button>
      </div>
    </el-card>
    
    <!-- 结果显示区域 -->
    <div class="result-section">
      <!-- 读取文件结果 -->
      <el-card>
        <div slot="header" class="clearfix">
          <span>文件读取结果</span>
        </div>
        <el-scrollbar class="log-area">
          <pre :class="readError ? 'error-text' : ''">{{ readResult }}</pre>
        </el-scrollbar>
      </el-card>
      
      <!-- 下载固件结果 -->
      <el-card>
        <div slot="header" class="clearfix">
          <span>固件下载结果</span>
        </div>
        <el-scrollbar class="log-area">
          <pre :class="downloadError ? 'error-text' : ''">{{ downloadResult }}</pre>
        </el-scrollbar>
      </el-card>
      
      <!-- 测试指令结果 -->
      <el-card>
        <div slot="header" class="clearfix">
          <span>测试指令结果</span>
        </div>
        <el-scrollbar class="log-area">
          <pre :class="testError ? 'error-text' : ''">{{ testResult }}</pre>
        </el-scrollbar>
      </el-card>
    </div>
  </div>

  <!-- 引入外部渲染进程脚本 -->
  <script src="./renderer.js"></script>
</body>
</html>